"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[866],{27113:function(_e,M,_){_.r(M),_.d(M,{default:function(){return $}});var j=_(93525),K=_.n(j),w=_(25359),l=_.n(w),B=_(49811),d=_.n(B),U=_(54306),c=_.n(U),o=_(93236),W=_(70003),f=_(35026),D=_(74567),b=_(49802),Z=_(52294),k=_(33306),p=_(73669),u=_(62086),le=W.Z.Dragger;function $(){var h="loadingKey",z=!0,O=1,ue={name:"xlsx",multiple:!0,maxCount:10,showUploadList:!1,accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",action:"/upload",onChange:function(e){var n=e.file.status;if(n==="uploading"&&f.ZP.loading({content:"\u6B63\u5728\u4E0A\u4F20...",duration:0,key:h}),n==="done"){var s=e.fileList.filter(function(t){return t.response.status==="success"});f.ZP.success({content:"\u4E0A\u4F20\u6210\u529F "+s.length+" \u4E2A\uFF0C\u5931\u8D25 "+(e.fileList.length-s.length)+" \u4E2A",duration:1.5,key:h})}else n==="error"&&f.ZP.error({content:"\u4E0A\u4F20\u5931\u8D25",duration:1.5,key:h})},onDrop:function(e){console.log("Dropped files",e.dataTransfer.files)}},G=(0,o.useState)(1),C=c()(G,2),F=C[0],I=C[1],H=(0,o.useState)(0),T=c()(H,2),J=T[0],N=T[1],Q=(0,o.useState)(!1),x=c()(Q,2),V=x[0],E=x[1],X=[{title:"\u795E\u7B56ID",key:"distinct_id",dataIndex:"distinct_id"},{title:"\u7528\u6237ID",key:"uid",dataIndex:"uid"},{title:"\u5E27\u7387",key:"frame_rate",dataIndex:"frame_rate"},{title:"\u7528\u6237\u72B6\u6001",key:"user_status",dataIndex:"user_status"},{title:"\u5F55\u5236\u8FDB\u7A0B",key:"record_process",dataIndex:"record_process"},{title:"\u5F55\u5236\u6A21\u5F0F",key:"record_mode",dataIndex:"record_mode"},{title:"\u5F55\u5236\u65F6\u957F\uFF08\u79D2\uFF09",key:"record_duration",dataIndex:"record_duration"},{title:"\u6587\u4EF6\u5927\u5C0F\uFF08Mb\uFF09",key:"file_size",dataIndex:"file_size",render:function(e,n,s){return e/1024/1024}},{title:"\u5206\u8FA8\u7387",key:"resolution",dataIndex:"resolution"},{title:"\u89C6\u9891\u91C7\u6837\u5E27",key:"files",dataIndex:"files",render:function(e,n,s){var t;return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(D.Z.PreviewGroup,{children:n==null||(t=n.files)===null||t===void 0?void 0:t.map(function(r,m){return(0,u.jsx)(D.Z,{width:150,src:"http://10.10.40.24:3001"+r},r+"_"+m)})})})}}],Y=(0,o.useState)([]),L=c()(Y,2),A=L[0],q=L[1],ee=(0,o.useState)([]),R=c()(ee,2),ne=R[0],te=R[1];(0,o.useEffect)(function(){p.Z.get("/files").then(function(a){if(a.data.status==="success"){var e=a.data.data.map(function(n){return{value:n,label:n}});te(e)}}).catch(function(a){console.log(a)})},[]);function ae(a){return v.apply(this,arguments)}function v(){return v=d()(l()().mark(function a(e){var n,s;return l()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return E(!0),r.prev=1,r.next=4,p.Z.get("/data?name="+e);case 4:return n=r.sent,r.next=7,S(1,O,n.data.data);case 7:s=r.sent,q(s),N(s.length),E(!1),r.next=17;break;case 13:r.prev=13,r.t0=r.catch(1),f.ZP.error("\u52A0\u8F7D\u6570\u636E\u9519\u8BEF!"),E(!1);case 17:case"end":return r.stop()}},a,null,[[1,13]])})),v.apply(this,arguments)}function re(a){return P.apply(this,arguments)}function P(){return P=d()(l()().mark(function a(e){return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",p.Z.get("/unzip?url="+e));case 1:case"end":return s.stop()}},a)})),P.apply(this,arguments)}function S(a,e,n){return g.apply(this,arguments)}function g(){return g=d()(l()().mark(function a(e,n,s){var t,r,m;return l()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(z){i.next=2;break}return i.abrupt("return",s);case 2:t=s.slice((e-1)*n,(e-1)*n+n),r=0;case 4:if(!(r<t.length)){i.next=12;break}return i.next=7,re(window.btoa(t[r].frame_sample_url));case 7:m=i.sent,m.data.status==="success"?t[r].files=m.data.data:t[r].files=[];case 9:r++,i.next=4;break;case 12:return s.splice.apply(s,[(e-1)*n,n].concat(K()(t))),i.abrupt("return",s);case 14:case"end":return i.stop()}},a)})),g.apply(this,arguments)}function se(a,e){return y.apply(this,arguments)}function y(){return y=d()(l()().mark(function a(e,n){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S(e,n,A);case 2:return t.next=4,I(e);case 4:case"end":return t.stop()}},a)})),y.apply(this,arguments)}return(0,u.jsxs)("div",{style:{padding:"20px"},children:[(0,u.jsx)("div",{style:{display:"flex"},children:(0,u.jsx)(b.Z,{children:(0,u.jsx)(b.Z.Item,{label:"\u9009\u62E9\u6587\u4EF6",name:"filename",children:(0,u.jsx)(Z.Z,{style:{width:180},onChange:function(){var a=d()(l()().mark(function e(n){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ae(n.split(".xlsx")[0]);case 2:return t.next=4,I(1);case 4:case"end":return t.stop()}},e)}));return function(e){return a.apply(this,arguments)}}(),options:ne})})})}),(0,u.jsx)(k.Z,{columns:X,dataSource:A,loading:{spinning:V,tip:"\u6570\u636E\u83B7\u53D6\u4E2D..."},bordered:!0,pagination:{total:J,defaultPageSize:O,current:F,pageSizeOptions:[50,100,200,500],showSizeChanger:!0,showTotal:function(e){return"\u5171 ".concat(e," \u6761\u6570\u636E")},onChange:se}})]})}}}]);
